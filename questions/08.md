# EC2インスタンス購入オプション

## 問題
ある企業は、Amazon EC2 インスタンス上でアプリケーションを実行する必要があります。実行中のワークロードは中断できません。そのため、契約期間の縛りなく利用できるインスタンス購入オプションが必要です。これらの要件を最もコスト効率よく満たすインスタンス購入オプションはどれですか?

## 選択肢
1. On-Demand Instances
2. Spot Instances
3. Dedicated Hosts
4. Reserved Instances

## 正解
1

## 解説
この問題の要件を整理すると：
- **中断できないワークロード** → 高い可用性が必要
- **契約期間の縛りなし** → 柔軟性が必要
- **コスト効率** → 要件を満たす中で最も安価

### EC2インスタンス購入オプション比較

#### 1. On-Demand Instances ✅
**特徴**:
- 契約期間なし、いつでも開始・停止可能
- 中断されることがない
- 使用した分だけ支払い（秒単位課金）

**適用場面**:
- 予測不可能なワークロード
- 短期間のアプリケーション
- 開発・テスト環境

#### 2. Spot Instances ❌
**特徴**:
- 最大90%の割引
- **AWSが容量を必要とする際に中断される可能性**
- 入札価格制

**問題点**: 中断される可能性があるため要件に不適合

#### 3. Dedicated Hosts ❌
**特徴**:
- 物理サーバー全体を専有
- ライセンス要件がある場合に使用
- **最も高価**

**問題点**: コスト効率が悪い

#### 4. Reserved Instances ❌
**特徴**:
- 1年または3年の契約期間
- 最大75%の割引
- 中断されない

**問題点**: **契約期間の縛りがある**ため要件に不適合

### コスト比較（例：t3.medium）
```
Spot Instances:     $0.0104/時間 (最安だが中断リスク)
Reserved (1年):     $0.0208/時間 (契約縛りあり)
On-Demand:          $0.0416/時間 ← 要件を満たす最安オプション
Dedicated Hosts:    $1.584/時間  (最高価格)
```

### 要件分析
| 要件 | On-Demand | Spot | Dedicated | Reserved |
|------|-----------|------|-----------|----------|
| 中断なし | ✅ | ❌ | ✅ | ✅ |
| 契約縛りなし | ✅ | ✅ | ✅ | ❌ |
| コスト効率 | ✅ | ✅ | ❌ | ✅ |

### 結論
**On-Demand Instances** が唯一すべての要件を満たすオプションです。

Spot Instancesは最も安価ですが中断リスクがあり、Reserved Instancesは安価ですが契約期間があるため、要件を満たしません。

参考: [Amazon EC2料金](https://aws.amazon.com/jp/ec2/pricing/)